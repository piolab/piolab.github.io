"use strict";angular.module("cardrepeatApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/learn",{templateUrl:"views/learn.html",controller:"LearnCtrl"}).when("/create",{templateUrl:"views/create.html",controller:"CreateCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("cardrepeatApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("cardrepeatApp").controller("CreateCtrl",["$scope","Cards","$log",function(a,b){a.cards=b}]),angular.module("cardrepeatApp").controller("LearnCtrl",["$scope","Cards","$http","$log","utilsFactory",function(a,b,c,d,e){console.log(b.data),(!b.data||b.data.length<4)&&(b.data=[{word:"hello",box:0},{word:"test",box:0},{word:"number",box:0},{word:"activity",box:0}]),a.cardsData=b;var f="https://www.googleapis.com/language/translate/v2?key=AIzaSyAvi7jqCRsiqFtaQLkwsnI1dmmNDCDLAc8";angular.forEach(b.data,function(a,d){var e=f+"&source=en&target=vi&q="+encodeURIComponent(a.word);c.get(e).success(function(a){b.data[d].meaning=a.data.translations[0].translatedText})}),a.isCompleted=function(){for(var b=0;b<a.cardsData.data.length;b++)if(a.cardsData.data.box<4)return!1;return!0},a.reviewing=!1,a.nextTest=function(){do var b=e.randomInteger(4);while(a.cardsData.data[b].box>3);a.cardId=b,a.reviewing=0===a.cardsData.data[b].box?!0:!1},a.nextTest(),a.onFinishReview=function(){a.reviewing=!1,0===a.cardsData.data[a.cardId].box&&a.cardsData.data[a.cardId].box++,a.nextTest()},a.onFinishQuizTest=function(b){b?(a.cardsData.data[a.cardId].box++,a.nextTest()):a.reviewing=!0},a.onFinishInputTypeTest=function(b){b?(a.cardsData.data[a.cardId].box++,a.nextTest()):a.reviewing=!0}}]),angular.module("cardrepeatApp").factory("Cards",function(){return{}}),angular.module("cardrepeatApp").directive("textareaparser",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=a.split("\n"),c=[];return angular.forEach(b,function(a){c.push({word:a,box:0})}),c}function f(a){console.log("arr "+a);var b=[];return angular.forEach(a,function(a){console.log(a.word),b.push(a.word)}),b.join("\n")}d.$parsers.push(e),d.$formatters.push(f)}}}),angular.module("cardrepeatApp").directive("cardView",function(){return{templateUrl:"views/templates/cardView.html",restrict:"A",scope:{cardData:"=",cardId:"@",onFinishReview:"&"},link:function(){}}}),angular.module("cardrepeatApp").directive("inputTextTest",["$timeout",function(a){return{templateUrl:"/views/templates/inputTextTest.html",restrict:"A",scope:{cardData:"=",cardId:"@",testType:"@",onFinishTest:"&"},link:function(b){b.createQuiz=function(){b.answerText="",b.answered=!1},b.answer=function(){b.isTrue=!1,b.answered=!0,angular.equals(angular.lowercase(b.answerText),angular.lowercase(b.cardData[b.cardId].word))&&(b.isTrue=!0),a(function(){b.onFinishTest({isTrue:b.isTrue}),b.createQuiz()},1e3)}}}}]),angular.module("cardrepeatApp").directive("cardTest",["utilsFactory","$timeout",function(a,b){return{templateUrl:"views/templates/cardTest.html",restrict:"A",scope:{cardData:"=",cardId:"@",testType:"@",numQuiz:"@",onFinishTest:"&"},link:function(c){c.createQuiz=function(){c.cardIdChoice=void 0;var b=a.getRandomsArray(c.cardData.length,c.numQuiz,parseInt(c.cardId)),d=a.randomInteger(b.length+1);b.splice(d,0,parseInt(c.cardId)),c.quizIndexs=b},c.wrongAnswer=function(a){return void 0!=c.cardIdChoice&&c.cardIdChoice==a&&c.cardIdChoice!=c.cardId},c.trueAnswer=function(a){return void 0!=c.cardIdChoice&&a==c.cardId},c.normalButton=function(a){return void 0==c.cardIdChoice||c.cardIdChoice!=a&&a!=c.cardId},c.answerChoice=function(a){void 0==c.cardIdChoice&&(c.cardIdChoice=a,b(function(){c.onFinishTest({isTrue:c.cardIdChoice==c.cardId}),c.createQuiz()},1e3))},c.keyPress=function(a){console.log(a.which)},c.createQuiz()}}}]),angular.module("cardrepeatApp").factory("utilsFactory",function(){return{randomInteger:function(a){return Math.floor(Math.random()*a)},inArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},getRandomsArray:function(a,b,c){for(var d=this,e=[],f=0;b>f;f++)for(;;){var g=d.randomInteger(a);if(!d.inArray(e,g)&&g!=c){e.push(g);break}}return console.log(e),e}}});